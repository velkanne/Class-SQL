[{
  "_id": {
    "$oid": "64c1b2d9e4b0a1a2b3c4d5e6"
  },
  "sku": "NT-GAM-001",
  "nombre": "Laptop Gamer Black Edition",
  "marca": "NegroTech",
  "categoria": "Portátiles",
  "precio": 1850,
  "stock": 12,
  "disponible": true,
  "tags": [
    "gaming",
    "rtx",
    "rgb",
    "alto rendimiento"
  ],
  "especificaciones": {
    "procesador": "AMD Ryzen 9",
    "ram": "32GB DDR5",
    "almacenamiento": {
      "principal": "1TB SSD NVMe",
      "secundario": "2TB HDD"
    },
    "pantalla": "15.6 pulgadas 144Hz",
    "color": "Negro Mate"
  },
  "fecha_ingreso": {
    "$date": "2025-10-01T08:00:00.000Z"
  }
},
{
  "_id": {
    "$oid": "64c1b2d9e4b0a1a2b3c4d5e7"
  },
  "sku": "NT-ACC-055",
  "nombre": "Teclado Mecánico Silent",
  "marca": "Logitech",
  "categoria": "Periféricos",
  "precio": 120.5,
  "stock": 50,
  "disponible": true,
  "tags": [
    "oficina",
    "silencioso",
    "inalámbrico"
  ],
  "especificaciones": {
    "tipo_switch": "Cherry MX Red",
    "idioma": "Español ISO",
    "conectividad": [
      "Bluetooth",
      "USB-C"
    ],
    "iluminacion": "Blanca"
  },
  "fecha_ingreso": {
    "$date": "2025-11-15T14:30:00.000Z"
  }
},
{
  "_id": {
    "$oid": "691c8dc541b12a84c93f6c20"
  },
  "$match": {
    "disponible": true
  }
},
{
  "_id": {
    "$oid": "691c8dc541b12a84c93f6c21"
  },
  "$group": {
    "_id": "$categoria",
    "total_referencias": {
      "$sum": 1
    },
    "unidades_stock": {
      "$sum": "$stock"
    },
    "valoracion_total": {
      "$sum": {
        "$multiply": [
          "$precio",
          "$stock"
        ]
      }
    }
  }
},
{
  "_id": {
    "$oid": "691c8dc541b12a84c93f6c22"
  },
  "$project": {
    "categoria": "$_id",
    "unidades_stock": 1,
    "valoracion_total": 1,
    "_id": 0,
    "estado": {
      "$cond": {
        "if": {
          "$gte": [
            "$valoracion_total",
            5000
          ]
        },
        "then": "Alta Prioridad",
        "else": "Estándar"
      }
    }
  }
},
{
  "_id": {
    "$oid": "691c8dc541b12a84c93f6c23"
  },
  "$sort": {
    "valoracion_total": -1
  }
}]