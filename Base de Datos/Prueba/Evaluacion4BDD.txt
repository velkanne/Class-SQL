CREATE TABLE componente (
    id_componente NUMBER (4),
    nombre VARCHAR2 (20) CONSTRAINT componente_nombre_nn NOT NULL,
    concentracion NUMBER (5),
    unidad VARCHAR2 (5),
    id_medicamento NUMBER (4),
	CONSTRAINT componente_pk PRIMARY KEY (id_componente)
);

CREATE TABLE familia (
	id_familia NUMBER (4),
    nombre VARCHAR2 (50) CONSTRAINT familia_nombre_nn NOT NULL,
    CONSTRAINT familia_pk PRIMARY KEY (id_familia)
);

CREATE TABLE medicamento (
    id_medicamento NUMBER (4),
    nombre VARCHAR2 (20) CONSTRAINT medicamento_nombre_nn NOT NULL,
    precio NUMBER (20) CONSTRAINT medicamento_precio_nn NOT NULL,
    laboratorio VARCHAR2 (20),
    id_presentacion NUMBER (4),
    CONSTRAINT medicamento_pk PRIMARY KEY (id_medicamento)
);

CREATE TABLE presentacion (
    id_presentacion NUMBER (4),
    nombre VARCHAR2 (20) CONSTRAINT presentacion_nombre_nn NOT NULL,
    cantidad NUMBER (5),
    unidad VARCHAR2 (5),
    CONSTRAINT presentacion_pk PRIMARY KEY (id_presentacion)
);

CREATE TABLE producto_tipo (
    id_medicamento NUMBER (4) NOT NULL,
    id_familia NUMBER (4) NOT NULL,
    CONSTRAINT producto_tipo_pk PRIMARY KEY (id_medicamento, id_familia)
);

ALTER TABLE medicamento
ADD CONSTRAINT medicamento_presentacion_fk FOREIGN KEY (id_presentacion)
REFERENCES presentacion (id_presentacion);

ALTER TABLE componente
ADD CONSTRAINT componente_medicamento_fk FOREIGN KEY (id_medicamento)
REFERENCES medicamento (id_medicamento);

ALTER TABLE producto_tipo
ADD CONSTRAINT producto_tipo_medicamento_fk FOREIGN KEY (id_medicamento)
REFERENCES medicamento (id_medicamento);

ALTER TABLE producto_tipo
ADD CONSTRAINT producto_tipo_familia_fk FOREIGN KEY (id_familia)
REFERENCES familia (id_familia);

INSERT INTO componente (id_componente, nombre, concentracion, unidad)
VALUES (225, 'IBUPROFENO', 5, 'g');

INSERT INTO familia (id_familia, nombre)
VALUES (125, 'Antiinflamatorio no esteroide');

INSERT INTO medicamento (id_medicamento, nombre, precio, laboratorio)
VALUES (335, 'DOLORUB', 20000, 'MAVER');

INSERT INTO presentacion (id_presentacion, nombre, cantidad, unidad)
VALUES(444, 'Crema', 60, 'g');

COMMIT;
